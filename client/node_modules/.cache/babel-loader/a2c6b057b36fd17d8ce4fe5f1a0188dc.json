{"ast":null,"code":"var _jsxFileName = \"/Users/gabrieldsilva/Library/Mobile Documents/com~apple~CloudDocs/Documents/code/dev/volmate/client/src/pages/SignIn/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useRef } from 'react';\nimport { FiLogIn, FiMail, FiLock } from 'react-icons/fi';\nimport { Form } from '@unform/web';\nimport * as Yup from 'yup';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useAuth } from '../../hooks/auth';\nimport { useToast } from '../../hooks/toast';\nimport getValidationErrors from '../../utils/getValidationErrors';\nimport logoImg from \"../../assets/logo-up-md-green.svg\";\nimport Input from '../../components/Input';\nimport Button from '../../components/Button';\nimport { Container, Content, AnimationContainer, Background } from './styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SignIn = () => {\n  _s();\n\n  const formRef = useRef(null);\n  const {\n    signIn\n  } = useAuth();\n  const {\n    addToast\n  } = useToast();\n  const history = useHistory();\n  const handleSubmit = useCallback(async data => {\n    try {\n      var _formRef$current;\n\n      (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.setErrors({});\n      const schema = Yup.object().shape({\n        email: Yup.string().email('Enter a valid email').required('E-mail mandatory'),\n        password: Yup.string().required('Password mandatory')\n      });\n      await schema.validate(data, {\n        abortEarly: false\n      });\n      await signIn({\n        email: data.email,\n        password: data.password\n      });\n      history.push('/dashboard');\n    } catch (err) {\n      if (err instanceof Yup.ValidationError) {\n        var _formRef$current2;\n\n        const errors = getValidationErrors(err);\n        (_formRef$current2 = formRef.current) === null || _formRef$current2 === void 0 ? void 0 : _formRef$current2.setErrors(errors);\n        return;\n      }\n\n      addToast({\n        type: 'error',\n        title: 'Authentication error',\n        description: 'An error occurred while trying to log you in, please check credentials.'\n      });\n    }\n  }, [signIn, addToast, history]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Content, {\n      children: /*#__PURE__*/_jsxDEV(AnimationContainer, {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: logoImg,\n          alt: \"Agendo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          ref: formRef,\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Sign in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            name: \"email\",\n            icon: FiMail,\n            placeholder: \"E-mail\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            name: \"password\",\n            icon: FiLock,\n            type: \"password\",\n            placeholder: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            children: \"Continue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/signup\",\n          children: [/*#__PURE__*/_jsxDEV(FiLogIn, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), \"Create account\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Background, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SignIn, \"ZPggHRXgXth5P4xz6mbZjd2IB8E=\", false, function () {\n  return [useAuth, useToast, useHistory];\n});\n\n_c = SignIn;\nexport default SignIn;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"sources":["/Users/gabrieldsilva/Library/Mobile Documents/com~apple~CloudDocs/Documents/code/dev/volmate/client/src/pages/SignIn/index.tsx"],"names":["React","useCallback","useRef","FiLogIn","FiMail","FiLock","Form","Yup","Link","useHistory","useAuth","useToast","getValidationErrors","Input","Button","Container","Content","AnimationContainer","Background","SignIn","formRef","signIn","addToast","history","handleSubmit","data","current","setErrors","schema","object","shape","email","string","required","password","validate","abortEarly","push","err","ValidationError","errors","type","title","description","logoImg"],"mappings":"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","sourcesContent":["import React, { useCallback, useRef } from 'react';\nimport { FiLogIn, FiMail, FiLock } from 'react-icons/fi';\nimport { FormHandles } from '@unform/core';\nimport { Form } from '@unform/web';\nimport * as Yup from 'yup';\nimport { Link, useHistory } from 'react-router-dom';\n\nimport { useAuth } from '../../hooks/auth';\nimport { useToast } from '../../hooks/toast';\nimport getValidationErrors from '../../utils/getValidationErrors';\n\nimport logoImg from '../../assets/logo-up-md-green.svg';\n\nimport Input from '../../components/Input';\nimport Button from '../../components/Button';\n\nimport { Container, Content, AnimationContainer, Background } from './styles';\n\ninterface SignInFormData {\n  email: string;\n  password: string;\n}\n\nconst SignIn: React.FC = () => {\n  const formRef = useRef<FormHandles>(null);\n\n  const { signIn } = useAuth();\n  const { addToast } = useToast();\n\n  const history = useHistory();\n\n  const handleSubmit = useCallback(\n    async (data: SignInFormData) => {\n      try {\n        formRef.current?.setErrors({});\n\n        const schema = Yup.object().shape({\n          email: Yup.string()\n            .email('Enter a valid email')\n            .required('E-mail mandatory'),\n          password: Yup.string().required('Password mandatory'),\n        });\n\n        await schema.validate(data, {\n          abortEarly: false,\n        });\n\n        await signIn({\n          email: data.email,\n          password: data.password,\n        });\n\n        history.push('/dashboard');\n      } catch (err) {\n        if (err instanceof Yup.ValidationError) {\n          const errors = getValidationErrors(err);\n\n          formRef.current?.setErrors(errors);\n\n          return;\n        }\n\n        addToast({\n          type: 'error',\n          title: 'Authentication error',\n          description:\n            'An error occurred while trying to log you in, please check credentials.',\n        });\n      }\n    },\n    [signIn, addToast, history],\n  );\n\n  return (\n    <Container>\n      <Content>\n        <AnimationContainer>\n          <img src={logoImg} alt=\"Agendo\" />\n\n          <Form ref={formRef} onSubmit={handleSubmit}>\n            <h1>Sign in</h1>\n\n            <Input name=\"email\" icon={FiMail} placeholder=\"E-mail\" />\n\n            <Input\n              name=\"password\"\n              icon={FiLock}\n              type=\"password\"\n              placeholder=\"Password\"\n            />\n\n            <Button type=\"submit\">Continue</Button>\n          </Form>\n\n          <Link to=\"/signup\">\n            <FiLogIn />\n            Create account\n          </Link>\n        </AnimationContainer>\n      </Content>\n\n      <Background />\n    </Container>\n  );\n};\n\nexport default SignIn;\n"]},"metadata":{},"sourceType":"module"}